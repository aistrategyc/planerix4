# üìã –ü–û–õ–ù–´–ô –ê–£–î–ò–¢ –ü–†–û–ï–ö–¢–ê - –°–ü–ò–°–û–ö –î–û–†–ê–ë–û–¢–û–ö
**–î–∞—Ç–∞**: 15 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å Production**: ‚úÖ LIVE (app.planerix.com)
**–í–µ—Ä—Å–∏—è**: 1.0 (Post-Launch)

---

## üéØ EXECUTIVE SUMMARY

**–¶–µ–ª—å –∞—É–¥–∏—Ç–∞**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, UX, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Planerix.

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**:
- ‚úÖ Production –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ 17 –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö endpoints –∑–∞—â–∏—â–µ–Ω—ã JWT
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (8 —Ä–æ–ª–µ–π) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ Calendar API (9 endpoints) —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ EventLink —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ Onboarding —Å–∏—Å—Ç–µ–º–∞ —Å —à–∞–±–ª–æ–Ω–∞–º–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è**:
- üî¥ **CRITICAL** - –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
- üü† **HIGH** - –ö—Ä–∏—Ç–∏—á–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–º —Ä–µ–ª–∏–∑–µ
- üü° **MEDIUM** - –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è, –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å –Ω–∞ 1-2 –Ω–µ–¥–µ–ª–∏
- üü¢ **LOW** - Nice-to-have, –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX

---

## üìä –ö–ê–¢–ï–ì–û–†–ò–ò –î–û–†–ê–ë–û–¢–û–ö

### 1. [FRONTEND] - User Interface & Experience
### 2. [BACKEND] - API & Business Logic
### 3. [DATABASE] - Schema & Performance
### 4. [INTEGRATION] - Third-party Services
### 5. [DEVOPS] - Infrastructure & Monitoring
### 6. [TESTING] - QA & Automation
### 7. [DOCUMENTATION] - User & Developer Docs

---

## 1Ô∏è‚É£ FRONTEND - USER INTERFACE & EXPERIENCE

### 1.1 üî¥ CRITICAL - EventLink UI Missing

**–ü—Ä–æ–±–ª–µ–º–∞**: Backend EventLink API –≥–æ—Ç–æ–≤ (6 endpoints), –Ω–æ UI –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –ª–∏–Ω–∫–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –∫ OKR.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **–°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `EventLinkManager.tsx`**:
   - –§–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ª–∏–Ω–∫–∞ (task ‚Üí OKR KR, event ‚Üí KPI)
   - –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ª–∏–Ω–∫–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
   - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤ (weight) –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
   - Bulk operations (—Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–∏–Ω–∫–æ–≤ —Ä–∞–∑–æ–º)

2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ Task Detail Page**:
   ```tsx
   // apps/web-enterprise/src/app/tasks/[id]/page.tsx
   <EventLinkSection taskId={task.id} />
   // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å: "This task contributes to OKR: [Name]"
   ```

3. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ OKR Detail Page**:
   ```tsx
   // apps/web-enterprise/src/app/okrs/[id]/page.tsx
   <LinkedTasksList okrId={okr.id} />
   // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å: "3 tasks linked (auto-update progress)"
   ```

4. **–î–æ–±–∞–≤–∏—Ç—å drag-and-drop –ª–∏–Ω–∫–∏–Ω–≥**:
   - –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∞ OKR Key Result
   - Visual feedback (highlight, tooltip)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ CRITICAL
**–í—Ä–µ–º—è**: 12 —á–∞—Å–æ–≤
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç**: –ö–ª—é—á–µ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

---

### 1.2 üü† HIGH - Onboarding Template Selector UI Missing

**–ü—Ä–æ–±–ª–µ–º–∞**: Backend –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 4 —à–∞–±–ª–æ–Ω–∞ (business, marketing, software, sales), –Ω–æ UI –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ `/onboarding`.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **–°–æ–∑–¥–∞—Ç—å `TemplateSelector.tsx`**:
   ```tsx
   // apps/web-enterprise/src/components/onboarding/TemplateSelector.tsx
   interface Template {
     name: string
     description: string
     icon: LucideIcon
     ideal_for: string
     includes: string[]
   }

   // –ö—Ä–∞—Å–∏–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ (4 cards)
   // Hover effects, recommended badges
   ```

2. **–û–±–Ω–æ–≤–∏—Ç—å `/onboarding/page.tsx`**:
   - –®–∞–≥ 1: –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ (–Ω–æ–≤—ã–π UI)
   - –®–∞–≥ 2: –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - –®–∞–≥ 3: Invite members
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å loading state –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ sample data

3. **–î–æ–±–∞–≤–∏—Ç—å preview —à–∞–±–ª–æ–Ω–∞**:
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ (X projects, Y tasks, Z events)
   - Button "Skip" –¥–ª—è empty template

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü† HIGH
**–í—Ä–µ–º—è**: 8 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: First-time user experience

---

### 1.3 üü† HIGH - Calendar UI Improvements

**–ü—Ä–æ–±–ª–µ–º–∞**: Calendar page —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ–¥–æ—Å—Ç–∞–µ—Ç –≤–∞–∂–Ω—ã—Ö UX —Ñ–∏—á.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Recurrence Support UI**:
   - Selector –¥–ª—è RRULE patterns (Daily, Weekly, Monthly)
   - "Repeat every X days/weeks" inputs
   - "End after X occurrences" or "End by date"
   - Display recurrence info in event detail

2. **Event Edit Dialog**:
   - Currently missing - —Ç–æ–ª—å–∫–æ create + delete
   - Inline editing –¥–ª—è event details
   - Change assignee, dates, status

3. **Attendees Management UI**:
   - Add/remove attendees
   - RSVP status badges (accepted, declined, tentative)
   - Send email invites

4. **Linking to Tasks/OKRs UI**:
   - Dropdown "Link to task" (search by name)
   - Show linked entities in event detail
   - "This event is linked to Task: [Name]"

5. **Views Enhancement**:
   - Add Agenda view (list of upcoming events)
   - Add Year view
   - Filter by event type, priority, assignee

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü† HIGH
**–í—Ä–µ–º—è**: 16 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Core calendar functionality

---

### 1.4 üü° MEDIUM - Data Analytics UI/UX Polish

**–ü—Ä–æ–±–ª–µ–º–∞**: Analytics page —Ä–∞–±–æ—Ç–∞–µ—Ç (22 endpoints), –Ω–æ UI –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω –∏ –Ω–µ –∏–Ω—Ç—É–∏—Ç–∏–≤–µ–Ω.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Dashboard Reorganization**:
   - –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ —Ç–∞–±—ã: Overview / Campaigns / Funnel / Attribution
   - Sticky filter bar (date range, platform)
   - Export to PDF/Excel button

2. **Interactive Charts**:
   - Click –Ω–∞ campaign ‚Üí drill-down –≤ –¥–µ—Ç–∞–ª–∏
   - Hover tooltips —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
   - Zoom/pan –¥–ª—è timeline charts

3. **Smart Insights Panel**:
   - AI-generated recommendations (—Ç–æ–ø 3 –¥–µ–π—Å—Ç–≤–∏—è)
   - "üî¥ Alert: Campaign X CPL increased 50%"
   - "‚úÖ Success: Campaign Y ROAS above target"

4. **Saved Filters & Views**:
   - Save current filter set as "Q4 2025 Performance"
   - Quick access buttons –¥–ª—è —á–∞—Å—Ç—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤

5. **Mobile Responsiveness**:
   - Cards stack vertically
   - Charts resize properly
   - Filter collapse –Ω–∞ mobile

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° MEDIUM
**–í—Ä–µ–º—è**: 20 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: User experience, data discoverability

---

### 1.5 üü° MEDIUM - OKR Management UI Enhancement

**–ü—Ä–æ–±–ª–µ–º–∞**: –ë–∞–∑–æ–≤—ã–π CRUD –µ—Å—Ç—å, –Ω–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Key Results.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **OKR Progress Visualization**:
   - Progress bars –¥–ª—è –∫–∞–∂–¥–æ–≥–æ KR
   - Overall objective progress (weighted average)
   - Color coding (on track / at risk / behind)

2. **Key Results Management**:
   - Inline edit current_value (quick update)
   - Add note/comment –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
   - History timeline (changed from X to Y on date)

3. **OKR Alignment View**:
   - Tree view: Organization ‚Üí Department ‚Üí Team ‚Üí Individual OKRs
   - Show dependencies/relationships

4. **Check-in System**:
   - Weekly check-in reminder
   - Form –¥–ª—è update –≤—Å–µ—Ö KRs —Ä–∞–∑–æ–º
   - Comments field –¥–ª—è –∫–∞–∂–¥–æ–≥–æ check-in

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° MEDIUM
**–í—Ä–µ–º—è**: 14 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Goal tracking effectiveness

---

### 1.6 üü¢ LOW - Tasks Kanban Board

**–ü—Ä–æ–±–ª–µ–º–∞**: Tasks –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ table view, –Ω–µ—Ç Kanban.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Kanban Board Component**:
   - Columns: TODO / IN_PROGRESS / IN_REVIEW / DONE
   - Drag-and-drop –º–µ–∂–¥—É –∫–æ–ª–æ–Ω–∫–∞–º–∏
   - Card preview (title, assignee avatar, due date, priority)

2. **Filters & Grouping**:
   - Group by: Assignee, Priority, Project, Due Date
   - Filter by labels, tags

3. **Quick Actions**:
   - Hover –Ω–∞ card ‚Üí Quick edit, Delete, Assign
   - Double click ‚Üí Open detail modal

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü¢ LOW
**–í—Ä–µ–º—è**: 10 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Task management UX

---

### 1.7 üü¢ LOW - Dark Mode Support

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ light mode.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Theme Toggle**:
   - Button –≤ header –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
   - Persist –≤—ã–±–æ—Ä –≤ localStorage

2. **Dark Theme Colors**:
   - Update TailwindCSS config —Å dark: variants
   - Ensure charts/graphs —Ä–∞–±–æ—Ç–∞—é—Ç –≤ dark mode

3. **System Preference Detection**:
   - Auto-switch based on `prefers-color-scheme`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü¢ LOW
**–í—Ä–µ–º—è**: 8 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: User preference

---

### 1.8 üü¢ LOW - Notifications Center

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç centralized notifications UI.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Notification Bell Icon**:
   - Badge —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
   - Dropdown —Å–ø–∏—Å–æ–∫ notifications

2. **Notification Types**:
   - Task assigned to you
   - OKR check-in reminder
   - Event RSVP response
   - Budget recommendation alert

3. **Mark as read/unread**:
   - Click to mark read
   - "Mark all as read" button

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü¢ LOW
**–í—Ä–µ–º—è**: 6 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: User engagement

---

## 2Ô∏è‚É£ BACKEND - API & BUSINESS LOGIC

### 2.1 üî¥ CRITICAL - KPI System Enhancement

**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–µ–∫—É—â–∞—è KPI –º–æ–¥–µ–ª—å —É–ø—Ä–æ—â–µ–Ω–∞ (—Ç–æ–ª—å–∫–æ name, target_value, current_value). –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç:
- Measurement history
- Automated calculations
- Threshold alerts (warn/alarm)
- Multiple measurement sources

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **–û–±–Ω–æ–≤–∏—Ç—å KPI Models**:
   ```python
   # apps/api/liderix_api/models/kpi.py

   class KPIIndicator(Base):
       # ... existing fields
       baseline_value: float
       warn_threshold: float  # Yellow alert
       alarm_threshold: float  # Red alert
       source_type: Enum['manual', 'formula', 'external']
       formula: str  # e.g., "revenue / spend" for ROAS
       kpi_type: Enum['counter', 'gauge', 'percentage']
       period: Enum['daily', 'weekly', 'monthly', 'quarterly']
       aggregation: Enum['sum', 'avg', 'last', 'min', 'max']

   class KPIMeasurement(Base):
       id: UUID
       indicator_id: UUID (FK to KPIIndicator)
       value: float
       measured_at: DateTime
       notes: str
       source: str  # "manual", "api", "formula"
       created_by: UUID (FK to User)
   ```

2. **–°–æ–∑–¥–∞—Ç—å `/kpis/{id}/measurements` endpoints**:
   - `POST /kpis/{id}/measurements` - Add measurement
   - `GET /kpis/{id}/measurements` - Get history
   - `GET /kpis/{id}/measurements/latest` - Get latest

3. **Auto-update KPI status**:
   - –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ measurement ‚Üí recalculate status
   - `on_track` if >= baseline
   - `at_risk` if < warn_threshold
   - `off_track` if < alarm_threshold

4. **Formula Evaluation**:
   ```python
   def evaluate_formula(formula: str, context: dict) -> float:
       # Safe eval using ast.literal_eval
       # Example: formula = "total_revenue / total_spend"
       # context = {"total_revenue": 100000, "total_spend": 20000}
       # Returns: 5.0 (ROAS)
   ```

5. **Alembic Migration**:
   ```bash
   alembic revision -m "enhance_kpi_system_with_measurements"
   ```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ CRITICAL
**–í—Ä–µ–º—è**: 12 —á–∞—Å–æ–≤
**–ë–ª–æ–∫–∏—Ä—É–µ—Ç**: KPI tracking functionality

---

### 2.2 üü† HIGH - Auto Progress Update for EventLinks

**–ü—Ä–æ–±–ª–µ–º–∞**: EventLink —Å–æ–∑–¥–∞–Ω, –Ω–æ auto_update –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ OKR/KPI –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ task –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Task Update Trigger**:
   ```python
   # apps/api/liderix_api/routes/tasks.py

   @router.patch("/tasks/{task_id}")
   async def update_task(...):
       # ... update task

       # Trigger EventLink progress update
       if task.progress_percentage_changed or task.status_changed:
           await update_linked_targets(task_id, session)
   ```

2. **Progress Calculation Service**:
   ```python
   # apps/api/liderix_api/services/event_links.py

   async def update_linked_targets(
       source_id: UUID,
       source_type: str,  # "task", "event", "project"
       session: AsyncSession
   ):
       # Get all links for this source
       links = await get_event_links(source_id, source_type)

       for link in links:
           if link.auto_update:
               # Calculate weighted contribution
               source_progress = get_source_progress(source_id, source_type)
               weighted_value = source_progress * link.weight

               # Update target (OKR KR or KPI)
               await update_target_value(
                   link.target_id,
                   link.target_type,
                   weighted_value,
                   session
               )
   ```

3. **Aggregation Logic**:
   - –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ tasks linked –∫ –æ–¥–Ω–æ–º—É KR ‚Üí —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å weighted contributions
   - –ï—Å–ª–∏ task completion = 100% ‚Üí mark link as "completed"

4. **Audit Trail**:
   - Log –∫–∞–∂–¥–æ–µ auto-update —Å–æ–±—ã—Ç–∏–µ
   - "OKR KR updated from 45% to 58% due to Task X completion"

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü† HIGH
**–í—Ä–µ–º—è**: 10 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Core linking functionality

---

### 2.3 üü† HIGH - Recurrence Service Implementation

**–ü—Ä–æ–±–ª–µ–º–∞**: Calendar events –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç recurrence_type –≤ schema, –Ω–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è instances –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **–°–æ–∑–¥–∞—Ç—å RecurrenceService**:
   ```python
   # apps/api/liderix_api/services/recurrence.py

   from dateutil.rrule import rrulestr
   from datetime import datetime, timedelta

   class RecurrenceService:
       @staticmethod
       def generate_instances(
           parent_event: CalendarEvent,
           start_date: datetime,
           end_date: datetime
       ) -> List[CalendarEvent]:
           """
           Generate recurring event instances based on RRULE

           Example:
           - parent_event.recurrence_pattern = "FREQ=WEEKLY;BYDAY=MO,WE,FR"
           - Returns: [event_instance_1, event_instance_2, ...]
           """
           if parent_event.recurrence_type == RecurrenceType.NONE:
               return [parent_event]

           rrule = rrulestr(parent_event.recurrence_pattern, dtstart=parent_event.start_date)
           instances = []

           for dt in rrule.between(start_date, end_date):
               instance = CalendarEvent(
                   id=uuid4(),
                   parent_event_id=parent_event.id,
                   title=parent_event.title,
                   start_date=dt,
                   end_date=dt + (parent_event.end_date - parent_event.start_date),
                   # ... copy other fields
               )
               instances.append(instance)

           return instances
   ```

2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `/calendar/events` endpoint**:
   ```python
   @router.get("/calendar/events")
   async def list_events(expand_recurring: bool = False):
       events = await get_events(...)

       if expand_recurring:
           expanded = []
           for event in events:
               if event.recurrence_type != RecurrenceType.NONE:
                   instances = RecurrenceService.generate_instances(
                       event, start_date, end_date
                   )
                   expanded.extend(instances)
               else:
                   expanded.append(event)
           return expanded

       return events
   ```

3. **EXDATE Support**:
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ exclusion dates (–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞—Ç—ã)
   - `exdate = ['2025-10-20', '2025-10-27']`

4. **Update/Delete Recurring Events**:
   - "Update this event only" vs "Update all future events"
   - "Delete this occurrence" vs "Delete entire series"

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü† HIGH
**–í—Ä–µ–º—è**: 8 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Recurring meetings functionality

---

### 2.4 üü° MEDIUM - Permission Scoping –¥–ª—è Roles

**–ü—Ä–æ–±–ª–µ–º–∞**: –†–æ–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã (BU_MANAGER, HOD, TEAM_LEAD), –Ω–æ scoped access –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **–î–æ–±–∞–≤–∏—Ç—å scope fields –≤ Membership**:
   ```python
   # Alembic migration (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
   op.add_column('memberships', sa.Column('business_unit_id', UUID, nullable=True))
   op.add_column('memberships', sa.Column('department_id', UUID, nullable=True))
   op.add_column('memberships', sa.Column('team_id', UUID, nullable=True))
   ```

2. **Implement Scoped Access Checks**:
   ```python
   # apps/api/liderix_api/services/permissions.py

   def check_scoped_access(
       user: User,
       membership: Membership,
       resource: Any,
       resource_type: str
   ) -> bool:
       role = membership.role

       if role == MembershipRole.BU_MANAGER:
           # Can only access resources within their BU
           if hasattr(resource, 'business_unit_id'):
               return resource.business_unit_id == membership.business_unit_id

       if role == MembershipRole.HEAD_OF_DEPARTMENT:
           # Can only access resources within their department
           if hasattr(resource, 'department_id'):
               return resource.department_id == membership.department_id

       if role == MembershipRole.TEAM_LEAD:
           # Can only access resources within their team
           if hasattr(resource, 'team_id'):
               return resource.team_id == membership.team_id

       # OWNER and ADMIN have full access
       if role in [MembershipRole.OWNER, MembershipRole.ADMIN]:
           return True

       return False
   ```

3. **Apply to Resource Endpoints**:
   - Filter tasks: only show tasks within user's scope
   - Filter projects: only show projects within BU/department/team
   - Filter OKRs: only show relevant OKRs

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° MEDIUM
**–í—Ä–µ–º—è**: 10 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Enterprise multi-team functionality

---

### 2.5 üü° MEDIUM - Email Notifications System

**–ü—Ä–æ–±–ª–µ–º–∞**: –°–æ–±—ã—Ç–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç (task assigned, invitation sent), –Ω–æ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Setup Email Service**:
   ```python
   # apps/api/liderix_api/services/mailer.py

   from fastapi_mail import FastMail, MessageSchema, ConnectionConfig

   # Configure SMTP (e.g., SendGrid, AWS SES, Mailgun)
   conf = ConnectionConfig(
       MAIL_USERNAME=settings.MAIL_USERNAME,
       MAIL_PASSWORD=settings.MAIL_PASSWORD,
       MAIL_FROM=settings.MAIL_FROM,
       MAIL_PORT=587,
       MAIL_SERVER="smtp.sendgrid.net",
       MAIL_TLS=True,
       MAIL_SSL=False,
       USE_CREDENTIALS=True
   )

   async def send_email(to: str, subject: str, body: str):
       message = MessageSchema(
           subject=subject,
           recipients=[to],
           body=body,
           subtype="html"
       )
       fm = FastMail(conf)
       await fm.send_message(message)
   ```

2. **Email Templates**:
   - Task assigned: "You have been assigned to task: {task_name}"
   - Invitation: "You've been invited to join {org_name}"
   - OKR check-in reminder: "Time to update your OKRs"
   - Event RSVP: "New event invitation: {event_title}"

3. **Background Tasks**:
   ```python
   from fastapi import BackgroundTasks

   @router.post("/tasks/{task_id}/assign")
   async def assign_task(
       task_id: UUID,
       assignee_id: UUID,
       background_tasks: BackgroundTasks
   ):
       # ... assign task logic

       # Send email in background
       background_tasks.add_task(
           send_email,
           to=assignee.email,
           subject="New Task Assigned",
           body=render_template("task_assigned.html", task=task)
       )
   ```

4. **Email Preferences**:
   - User settings: "Email me when task assigned"
   - Frequency: Immediate, Daily digest, Weekly digest

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° MEDIUM
**–í—Ä–µ–º—è**: 12 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: User engagement, notifications

---

### 2.6 üü° MEDIUM - Rate Limiting & Throttling

**–ü—Ä–æ–±–ª–µ–º–∞**: API –Ω–µ –∏–º–µ–µ—Ç rate limiting, —É—è–∑–≤–∏–º –∫ abuse.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Install slowapi**:
   ```bash
   pip install slowapi
   ```

2. **Configure Rate Limits**:
   ```python
   # apps/api/liderix_api/main.py

   from slowapi import Limiter, _rate_limit_exceeded_handler
   from slowapi.util import get_remote_address
   from slowapi.errors import RateLimitExceeded

   limiter = Limiter(key_func=get_remote_address)
   app.state.limiter = limiter
   app.add_exception_handler(RateLimitExceeded, _rate_limit_exceeded_handler)
   ```

3. **Apply Limits to Endpoints**:
   ```python
   @router.post("/auth/login")
   @limiter.limit("5/minute")  # 5 requests per minute
   async def login(request: Request, ...):
       # ... login logic

   @router.get("/data-analytics/v5/kpi")
   @limiter.limit("100/hour")  # 100 requests per hour
   async def get_kpi(request: Request, ...):
       # ... analytics logic
   ```

4. **Different Limits for Roles**:
   - Free tier: 100 API calls/hour
   - Pro tier: 1000 API calls/hour
   - Enterprise: Unlimited

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° MEDIUM
**–í—Ä–µ–º—è**: 4 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Security, infrastructure protection

---

### 2.7 üü¢ LOW - Audit Logging –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞**: –ß–∞—Å—Ç–∏—á–Ω—ã–π audit logging –µ—Å—Ç—å (calendar events), –Ω–æ –Ω–µ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Create AuditLog Model**:
   ```python
   class AuditLog(Base):
       id: UUID
       user_id: UUID
       org_id: UUID
       action: str  # "created", "updated", "deleted"
       resource_type: str  # "task", "okr", "project"
       resource_id: UUID
       changes: JSONB  # {"old": {...}, "new": {...}}
       ip_address: str
       user_agent: str
       timestamp: DateTime
   ```

2. **Audit Middleware**:
   ```python
   @app.middleware("http")
   async def audit_middleware(request: Request, call_next):
       response = await call_next(request)

       # Log if mutation endpoint
       if request.method in ["POST", "PUT", "PATCH", "DELETE"]:
           await log_audit_event(
               user=request.state.user,
               action=request.method,
               path=request.url.path,
               ip=request.client.host,
               user_agent=request.headers.get("user-agent")
           )

       return response
   ```

3. **Audit Dashboard**:
   - `/admin/audit-logs` endpoint
   - Filter by user, date range, action type
   - Export to CSV

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü¢ LOW
**–í—Ä–µ–º—è**: 6 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Compliance, security

---

## 3Ô∏è‚É£ DATABASE - SCHEMA & PERFORMANCE

### 3.1 üü† HIGH - Add Missing Indexes

**–ü—Ä–æ–±–ª–µ–º–∞**: –ó–∞–ø—Ä–æ—Å—ã slow, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–∞—Ö (calendar events, tasks).

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Calendar Indexes**:
   ```sql
   -- Date range queries
   CREATE INDEX ix_calendar_events_date_range
   ON calendar_events USING GIST (tstzrange(start_date, end_date));

   -- User's events
   CREATE INDEX ix_calendar_events_creator_date
   ON calendar_events (creator_id, start_date DESC);

   -- Status filtering
   CREATE INDEX ix_calendar_events_status_date
   ON calendar_events (status, start_date)
   WHERE deleted_at IS NULL;
   ```

2. **Tasks Indexes**:
   ```sql
   -- Assignee tasks
   CREATE INDEX ix_tasks_assignee_status
   ON tasks (assigned_to, status)
   WHERE deleted_at IS NULL;

   -- Project tasks
   CREATE INDEX ix_tasks_project_priority
   ON tasks (project_id, priority DESC);

   -- Due date lookups
   CREATE INDEX ix_tasks_due_date
   ON tasks (due_date)
   WHERE status != 'DONE' AND deleted_at IS NULL;
   ```

3. **EventLink Indexes**:
   ```sql
   -- Source lookups
   CREATE INDEX ix_event_links_task_id
   ON event_links (task_id)
   WHERE task_id IS NOT NULL AND deleted_at IS NULL;

   CREATE INDEX ix_event_links_event_id
   ON event_links (event_id)
   WHERE event_id IS NOT NULL AND deleted_at IS NULL;

   -- Target lookups
   CREATE INDEX ix_event_links_okr_kr_id
   ON event_links (okr_kr_id)
   WHERE okr_kr_id IS NOT NULL AND deleted_at IS NULL;

   -- Weight-based ordering
   CREATE INDEX ix_event_links_weight
   ON event_links (weight DESC)
   WHERE is_active = TRUE;
   ```

4. **KPI Measurements Indexes**:
   ```sql
   -- Time-series queries
   CREATE INDEX ix_kpi_measurements_indicator_time
   ON kpi_measurements (indicator_id, measured_at DESC);

   -- Latest measurement
   CREATE INDEX ix_kpi_measurements_latest
   ON kpi_measurements (indicator_id, measured_at DESC)
   WHERE measured_at IS NOT NULL;
   ```

5. **Alembic Migration**:
   ```bash
   alembic revision -m "add_performance_indexes"
   ```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü† HIGH
**–í—Ä–µ–º—è**: 3 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Query performance (10x-50x faster)

---

### 3.2 üü° MEDIUM - Database Query Optimization

**–ü—Ä–æ–±–ª–µ–º–∞**: N+1 queries –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö endpoints (–æ—Å–æ–±–µ–Ω–Ω–æ —Å relationships).

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Eager Loading**:
   ```python
   # BAD (N+1 queries)
   tasks = session.query(Task).all()
   for task in tasks:
       print(task.assignee.username)  # Extra query per task

   # GOOD (2 queries total)
   tasks = session.query(Task).options(
       selectinload(Task.assignee)
   ).all()
   for task in tasks:
       print(task.assignee.username)
   ```

2. **Batch Loading**:
   ```python
   # For EventLinks with multiple relationships
   links = await session.execute(
       select(EventLink)
       .options(
           selectinload(EventLink.task),
           selectinload(EventLink.event),
           selectinload(EventLink.okr_key_result),
           selectinload(EventLink.kpi_indicator)
       )
   )
   ```

3. **Pagination Optimization**:
   ```python
   # Add cursor-based pagination –¥–ª—è –±–æ–ª—å—à–∏—Ö datasets
   @router.get("/tasks")
   async def list_tasks(
       cursor: Optional[str] = None,
       limit: int = 50
   ):
       # Instead of OFFSET (slow on large tables)
       if cursor:
           query = query.where(Task.id > cursor)

       tasks = await query.limit(limit).all()
       next_cursor = tasks[-1].id if len(tasks) == limit else None

       return {"items": tasks, "next_cursor": next_cursor}
   ```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° MEDIUM
**–í—Ä–µ–º—è**: 6 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: API response time

---

### 3.3 üü¢ LOW - Database Backup & Recovery Strategy

**–ü—Ä–æ–±–ª–µ–º–∞**: Production database –Ω–µ –∏–º–µ–µ—Ç automated backups.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Automated Daily Backups**:
   ```bash
   # Cron job –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   # /etc/cron.d/postgres-backup
   0 2 * * * root /opt/scripts/backup_postgres.sh

   # backup_postgres.sh
   #!/bin/bash
   DATE=$(date +%Y%m%d_%H%M%S)
   BACKUP_DIR="/backups/postgres"

   docker exec planerix-postgres-prod pg_dump -U app -d app > \
     $BACKUP_DIR/app_$DATE.sql

   # Compress
   gzip $BACKUP_DIR/app_$DATE.sql

   # Delete backups older than 30 days
   find $BACKUP_DIR -name "*.sql.gz" -mtime +30 -delete
   ```

2. **Offsite Backup**:
   - Upload to S3/Backblaze daily
   - Encryption at rest

3. **Restore Testing**:
   - Monthly restore test –Ω–∞ staging environment
   - Document recovery procedures

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü¢ LOW
**–í—Ä–µ–º—è**: 4 —á–∞—Å–∞
**–í–ª–∏—è–Ω–∏–µ**: Data protection

---

## 4Ô∏è‚É£ INTEGRATION - THIRD-PARTY SERVICES

### 4.1 üü° MEDIUM - N8N Workflow Integration

**–ü—Ä–æ–±–ª–µ–º–∞**: N8N —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω, –Ω–æ –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Planerix API.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Create Webhook Endpoints**:
   ```python
   @router.post("/webhooks/n8n/task-created")
   async def n8n_task_webhook(data: dict):
       # Trigger N8N workflow when task created
       # E.g., send Slack notification, update Google Sheets
   ```

2. **Common Workflows**:
   - Task assigned ‚Üí Slack notification
   - OKR check-in due ‚Üí Email reminder
   - Budget exceeded ‚Üí Alert to CFO
   - New lead ‚Üí Add to CRM (HubSpot, Salesforce)

3. **N8N Credentials Management**:
   - Store API credentials in N8N_ENCRYPTION_KEY encrypted storage
   - Provide UI –¥–ª—è connecting integrations

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° MEDIUM
**–í—Ä–µ–º—è**: 8 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Automation, integrations

---

### 4.2 üü¢ LOW - Google Calendar Sync

**–ü—Ä–æ–±–ª–µ–º–∞**: Calendar events –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –≤ Planerix, no sync —Å Google Calendar.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Google Calendar API Integration**:
   ```python
   from google.oauth2.credentials import Credentials
   from googleapiclient.discovery import build

   async def sync_to_google_calendar(event: CalendarEvent, user: User):
       creds = Credentials(token=user.google_access_token)
       service = build('calendar', 'v3', credentials=creds)

       google_event = {
           'summary': event.title,
           'description': event.description,
           'start': {'dateTime': event.start_date.isoformat()},
           'end': {'dateTime': event.end_date.isoformat()},
       }

       service.events().insert(calendarId='primary', body=google_event).execute()
   ```

2. **OAuth Flow**:
   - User connects Google account
   - Store access/refresh tokens
   - Two-way sync (Planerix ‚Üî Google)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü¢ LOW
**–í—Ä–µ–º—è**: 12 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Calendar integration

---

## 5Ô∏è‚É£ DEVOPS - INFRASTRUCTURE & MONITORING

### 5.1 üü† HIGH - Application Monitoring (Prometheus + Grafana)

**–ü—Ä–æ–±–ª–µ–º–∞**: No metrics, no dashboards, blind to production issues.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Setup Prometheus**:
   ```yaml
   # docker-compose.prod.yml
   prometheus:
     image: prom/prometheus:latest
     volumes:
       - ./prometheus.yml:/etc/prometheus/prometheus.yml
       - prometheus_data:/prometheus
     ports:
       - "9090:9090"
   ```

2. **Instrument FastAPI**:
   ```python
   from prometheus_client import Counter, Histogram, generate_latest

   request_count = Counter('http_requests_total', 'Total HTTP requests', ['method', 'endpoint'])
   request_latency = Histogram('http_request_duration_seconds', 'HTTP request latency')

   @app.middleware("http")
   async def metrics_middleware(request: Request, call_next):
       start_time = time.time()
       response = await call_next(request)
       duration = time.time() - start_time

       request_count.labels(method=request.method, endpoint=request.url.path).inc()
       request_latency.observe(duration)

       return response

   @app.get("/metrics")
   def metrics():
       return Response(generate_latest(), media_type="text/plain")
   ```

3. **Setup Grafana**:
   ```yaml
   grafana:
     image: grafana/grafana:latest
     volumes:
       - grafana_data:/var/lib/grafana
     ports:
       - "3000:3000"
   ```

4. **Create Dashboards**:
   - Request rate (req/sec)
   - Response time (P50, P95, P99)
   - Error rate (4xx, 5xx)
   - Database query time
   - Active users

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü† HIGH
**–í—Ä–µ–º—è**: 8 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Production visibility

---

### 5.2 üü° MEDIUM - Error Tracking (Sentry)

**–ü—Ä–æ–±–ª–µ–º–∞**: Errors happen, but not tracked or alerted.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Setup Sentry**:
   ```python
   import sentry_sdk
   from sentry_sdk.integrations.fastapi import FastApiIntegration

   sentry_sdk.init(
       dsn=settings.SENTRY_DSN,
       integrations=[FastApiIntegration()],
       traces_sample_rate=0.1,
       environment="production"
   )
   ```

2. **Custom Error Context**:
   ```python
   with sentry_sdk.push_scope() as scope:
       scope.set_tag("user_id", user.id)
       scope.set_tag("org_id", org.id)
       scope.set_context("request", {
           "path": request.url.path,
           "method": request.method
       })
       # Error –±—É–¥–µ—Ç caught –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   ```

3. **Alert Rules**:
   - Spike –≤ error rate ‚Üí Slack alert
   - Critical error ‚Üí Email to on-call engineer

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° MEDIUM
**–í—Ä–µ–º—è**: 4 —á–∞—Å–∞
**–í–ª–∏—è–Ω–∏–µ**: Error tracking, faster debugging

---

### 5.3 üü¢ LOW - CI/CD Pipeline

**–ü—Ä–æ–±–ª–µ–º–∞**: Manual deployment, no automated testing.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **GitHub Actions Workflow**:
   ```yaml
   # .github/workflows/deploy.yml
   name: Deploy to Production

   on:
     push:
       branches: [main]

   jobs:
     test:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v2
         - name: Run Backend Tests
           run: cd apps/api && pytest
         - name: Run Frontend Tests
           run: cd apps/web-enterprise && npm test

     deploy:
       needs: test
       runs-on: ubuntu-latest
       steps:
         - name: SSH to server and deploy
           run: |
             ssh root@65.108.220.33 \
               'cd /opt/MONOREPv3 && \
               git pull && \
               docker-compose -f docker-compose.prod.yml up -d --build'
   ```

2. **Automated Tests**:
   - Unit tests –¥–ª—è services
   - Integration tests –¥–ª—è API endpoints
   - E2E tests –¥–ª—è critical user flows

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü¢ LOW
**–í—Ä–µ–º—è**: 10 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Deployment confidence

---

## 6Ô∏è‚É£ TESTING - QA & AUTOMATION

### 6.1 üü† HIGH - Backend Unit Tests

**–ü—Ä–æ–±–ª–µ–º–∞**: No tests, risky refactoring.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Setup pytest**:
   ```bash
   pip install pytest pytest-asyncio httpx
   ```

2. **Test Structure**:
   ```python
   # apps/api/tests/test_tasks.py

   @pytest.fixture
   async def test_client():
       async with AsyncClient(app=app, base_url="http://test") as client:
           yield client

   @pytest.fixture
   async def test_user(test_db):
       user = User(id=uuid4(), email="test@test.com")
       test_db.add(user)
       await test_db.commit()
       return user

   @pytest.mark.asyncio
   async def test_create_task(test_client, test_user):
       response = await test_client.post(
           "/tasks",
           json={"title": "Test Task", "project_id": str(uuid4())},
           headers={"Authorization": f"Bearer {test_user.access_token}"}
       )
       assert response.status_code == 201
       assert response.json()["title"] == "Test Task"
   ```

3. **Test Coverage Target**:
   - Critical paths: 80% coverage
   - Services: 70% coverage
   - Routes: 60% coverage

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü† HIGH
**–í—Ä–µ–º—è**: 20 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Code quality, refactoring safety

---

### 6.2 üü° MEDIUM - Frontend Unit Tests

**–ü—Ä–æ–±–ª–µ–º–∞**: No tests –¥–ª—è React components.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Setup Jest + React Testing Library**:
   ```bash
   npm install --save-dev @testing-library/react @testing-library/jest-dom
   ```

2. **Component Tests**:
   ```tsx
   // apps/web-enterprise/src/components/tasks/TaskCard.test.tsx

   import { render, screen } from '@testing-library/react'
   import TaskCard from './TaskCard'

   test('displays task title', () => {
     const task = { id: '1', title: 'Test Task', status: 'TODO' }
     render(<TaskCard task={task} />)
     expect(screen.getByText('Test Task')).toBeInTheDocument()
   })
   ```

3. **Hook Tests**:
   ```tsx
   import { renderHook, waitFor } from '@testing-library/react'
   import { useCalendar } from '@/app/calendar/hooks/useCalendar'

   test('fetches calendar events', async () => {
     const { result } = renderHook(() => useCalendar())
     await waitFor(() => expect(result.current.loading).toBe(false))
     expect(result.current.events.length).toBeGreaterThan(0)
   })
   ```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° MEDIUM
**–í—Ä–µ–º—è**: 16 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Component stability

---

### 6.3 üü¢ LOW - E2E Tests (Playwright)

**–ü—Ä–æ–±–ª–µ–º–∞**: No automated browser testing.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Setup Playwright**:
   ```bash
   npm install --save-dev @playwright/test
   ```

2. **Critical Flow Tests**:
   ```typescript
   // e2e/auth.spec.ts

   test('user can login and create task', async ({ page }) => {
     await page.goto('http://localhost:3002/login')
     await page.fill('input[name=email]', 'test@test.com')
     await page.fill('input[name=password]', 'password123')
     await page.click('button[type=submit]')

     await expect(page).toHaveURL('/dashboard')

     await page.click('text=New Task')
     await page.fill('input[name=title]', 'E2E Test Task')
     await page.click('button:has-text("Create")')

     await expect(page.locator('text=E2E Test Task')).toBeVisible()
   })
   ```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü¢ LOW
**–í—Ä–µ–º—è**: 10 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Regression prevention

---

## 7Ô∏è‚É£ DOCUMENTATION - USER & DEVELOPER

### 7.1 üü† HIGH - API Documentation Enhancement

**–ü—Ä–æ–±–ª–µ–º–∞**: OpenAPI docs exist (`/docs`), but lack examples and descriptions.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Enhanced Docstrings**:
   ```python
   @router.post("/tasks", response_model=TaskRead)
   async def create_task(data: TaskCreate):
       """
       Create a new task

       Creates a new task and assigns it to the specified user.

       **Parameters**:
       - **title**: Task title (required, 1-500 chars)
       - **description**: Detailed description (optional)
       - **project_id**: Project UUID (required)
       - **assigned_to**: User UUID (optional, defaults to creator)
       - **due_date**: ISO datetime (optional)
       - **priority**: low, medium, high, urgent (optional, default: medium)

       **Returns**: Created task with ID and metadata

       **Example**:
       ```json
       {
         "title": "Implement login page",
         "description": "Create React component for user authentication",
         "project_id": "uuid-here",
         "assigned_to": "user-uuid",
         "due_date": "2025-10-20T15:00:00Z",
         "priority": "high"
       }
       ```

       **Errors**:
       - 400: Invalid input (title too long, invalid UUID)
       - 401: Unauthorized (missing token)
       - 404: Project not found
       """
   ```

2. **Request/Response Examples**:
   - Add example values to Pydantic schemas
   ```python
   class TaskCreate(BaseModel):
       title: str = Field(..., example="Implement login page")
       description: Optional[str] = Field(None, example="Create React component...")
       priority: TaskPriority = Field(default=TaskPriority.MEDIUM, example="high")
   ```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü† HIGH
**–í—Ä–µ–º—è**: 8 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Developer experience

---

### 7.2 üü° MEDIUM - User Guide & Tutorials

**–ü—Ä–æ–±–ª–µ–º–∞**: No user-facing documentation.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Getting Started Guide**:
   - "Your First 5 Minutes with Planerix"
   - Create organization ‚Üí Invite team ‚Üí Create first project ‚Üí Add tasks

2. **Feature Guides**:
   - "Setting up OKRs for your team"
   - "Using Calendar for meeting management"
   - "Linking tasks to OKRs for automatic progress tracking"
   - "Understanding Analytics Dashboard"

3. **Video Tutorials**:
   - 2-minute intro video
   - 5-minute feature walkthroughs

4. **Help Center**:
   - `/help` page with searchable articles
   - Embedded tutorials in UI (tooltips, onboarding tours)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü° MEDIUM
**–í—Ä–µ–º—è**: 16 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: User onboarding success

---

### 7.3 üü¢ LOW - Developer Setup Guide

**–ü—Ä–æ–±–ª–µ–º–∞**: README exists, but lacks detailed setup instructions.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å**:
1. **Enhanced README.md**:
   - Prerequisites checklist
   - Step-by-step setup (with screenshots)
   - Common errors and solutions
   - Architecture diagrams

2. **CONTRIBUTING.md**:
   - Code style guidelines
   - Git workflow (branches, commits, PRs)
   - Testing requirements

3. **Architecture Documentation**:
   - System architecture diagram
   - Database ERD
   - API flow diagrams

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü¢ LOW
**–í—Ä–µ–º—è**: 6 —á–∞—Å–æ–≤
**–í–ª–∏—è–Ω–∏–µ**: Developer onboarding

---

## üìà PRIORITY MATRIX & ROADMAP

### Sprint 1 (Week 1-2): CRITICAL + HIGH Priority
**Focus**: Core functionality completion

üî¥ **CRITICAL** (Must Have):
1. EventLink UI Implementation (12h) - **BLOCKING**
2. KPI System Enhancement (12h) - **BLOCKING**
3. Add Missing Database Indexes (3h) - **PERFORMANCE**

üü† **HIGH** (Should Have):
4. Onboarding Template Selector UI (8h)
5. Calendar UI Improvements (16h)
6. Auto Progress Update for EventLinks (10h)
7. Recurrence Service Implementation (8h)
8. Application Monitoring Setup (8h)
9. Backend Unit Tests (20h)
10. API Documentation Enhancement (8h)

**Total**: ~105 hours (~2.5 weeks for 1 developer, ~1.5 weeks for 2 developers)

---

### Sprint 2 (Week 3-4): MEDIUM Priority
**Focus**: UX improvements & integrations

üü° **MEDIUM**:
11. Data Analytics UI/UX Polish (20h)
12. OKR Management UI Enhancement (14h)
13. Permission Scoping for Roles (10h)
14. Email Notifications System (12h)
15. Rate Limiting & Throttling (4h)
16. Database Query Optimization (6h)
17. N8N Workflow Integration (8h)
18. Error Tracking (Sentry) (4h)
19. Frontend Unit Tests (16h)
20. User Guide & Tutorials (16h)

**Total**: ~110 hours (~2.5 weeks)

---

### Sprint 3 (Week 5-6): LOW Priority
**Focus**: Polish, testing, DevOps

üü¢ **LOW**:
21. Tasks Kanban Board (10h)
22. Dark Mode Support (8h)
23. Notifications Center (6h)
24. Audit Logging Enhancement (6h)
25. Database Backup Strategy (4h)
26. Google Calendar Sync (12h)
27. CI/CD Pipeline (10h)
28. E2E Tests (Playwright) (10h)
29. Developer Setup Guide (6h)

**Total**: ~72 hours (~2 weeks)

---

## üéØ ESTIMATED TOTAL EFFORT

**Total Hours**: ~287 hours
**Estimated Timeline**:
- **1 Developer**: ~7-8 weeks (full-time)
- **2 Developers**: ~4-5 weeks (full-time)
- **3 Developers**: ~3 weeks (full-time)

**Recommendation**: Start with Sprint 1 (CRITICAL + HIGH), validate with users, then proceed to Sprint 2.

---

## ‚úÖ ACCEPTANCE CRITERIA

### Sprint 1 Completion Criteria:
- [ ] Users can create EventLinks —á–µ—Ä–µ–∑ UI
- [ ] Tasks –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç OKR progress
- [ ] KPI measurements system —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Calendar recurrence —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Onboarding –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç template selector
- [ ] Database queries <200ms (P95)
- [ ] Backend tests coverage >50%
- [ ] Prometheus metrics –¥–æ—Å—Ç—É–ø–Ω—ã –≤ /metrics
- [ ] API docs –∏–º–µ—é—Ç –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –≤—Å–µ—Ö endpoints

### Sprint 2 Completion Criteria:
- [ ] Analytics dashboard –∏–º–µ–µ—Ç —Ç–∞–±—ã –∏ filters
- [ ] OKR progress bars –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- [ ] Email notifications –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- [ ] Rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç (5 req/min –¥–ª—è login)
- [ ] N8N workflows –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
- [ ] Sentry tracking errors
- [ ] Frontend tests coverage >40%

### Sprint 3 Completion Criteria:
- [ ] Kanban board —Ä–∞–±–æ—Ç–∞–µ—Ç —Å drag-and-drop
- [ ] Dark mode toggle –≤ header
- [ ] Automated backups –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] CI/CD pipeline –¥–µ–ø–ª–æ–∏—Ç –Ω–∞ staging
- [ ] E2E tests –ø—Ä–æ—Ö–æ–¥—è—Ç –¥–ª—è critical flows

---

## üìû NEXT STEPS

1. **Review & Prioritize**: –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Å –±–∏–∑–Ω–µ—Å–æ–º
2. **Assign Developers**: –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–¥–∞—á–∏ –º–µ–∂–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
3. **Create Tickets**: –†–∞–∑–±–∏—Ç—å –∫–∞–∂–¥—É—é –∑–∞–¥–∞—á—É –Ω–∞ GitHub Issues/Jira tickets
4. **Start Sprint 1**: –ù–∞—á–∞—Ç—å —Å CRITICAL items (EventLink UI, KPI Enhancement)

---

**–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω**: 15 –æ–∫—Ç—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è**: 1.0
**–°—Ç–∞—Ç—É—Å**: Ready for Review

